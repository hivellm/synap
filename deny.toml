# cargo-deny configuration for Synap
# See https://embarkstudios.github.io/cargo-deny/

[advisories]
version = 2
db-path = "~/.cargo/advisory-db"
db-urls = ["https://github.com/rustsec/advisory-db"]
yanked = "warn"
# RUSTSEC-2024-0436: paste crate is unmaintained (transitive dependency via rmcp)
# We cannot control this until rmcp updates or we find an alternative
# RUSTSEC-2025-0119: number_prefix is unmaintained (used by indicatif 0.17, fixed in 0.18+)
# RUSTSEC-2025-0134: rustls-pemfile is unmaintained (used by reqwest 0.11, fixed in 0.12+)
# These are resolved in updated dependencies but CI may still flag them
ignore = [
    "RUSTSEC-2024-0436",
    "RUSTSEC-2025-0119",
    "RUSTSEC-2025-0134",
]

[licenses]
version = 2
allow = [
    "MIT",
    "Apache-2.0",
    "Apache-2.0 WITH LLVM-exception",
    "BSD-2-Clause",
    "BSD-3-Clause",
    "ISC",
    "Unicode-DFS-2016",
    "Unlicense",
    "CC0-1.0",
]
confidence-threshold = 0.8

# Allow licenses used by common Rust dependencies
[[licenses.clarify]]
name = "ring"
expression = "MIT AND ISC AND OpenSSL"
license-files = [
    { path = "LICENSE", hash = 0xbd0eed23 }
]

[bans]
multiple-versions = "warn"
wildcards = "allow"
highlight = "all"
workspace-default-features = "allow"
external-default-features = "allow"

# Skip duplicate version checks for these crates
skip = []

skip-tree = []

[sources]
unknown-registry = "warn"
unknown-git = "warn"
allow-registry = ["https://github.com/rust-lang/crates.io-index"]

